<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BienStarTotal</title>
    <!-- CSS Global -->
    <link rel="stylesheet" href="Base.css">
    <!-- CSS Específico -->
    <link rel="stylesheet" href="Perfil.css">
</head>
<body>
    <div id="contenedorPrincipal">

    
        <div id="encabezado">
            <div class="logo">
                <button class="btnLogo" onclick="window.location.href='index.html'"></button>
            </div>
            <div class="menúBotones">
                <button class="btnMenu" onclick="window.location.href='index.html'">Inicio</button>
                <button class="btnMenu" onclick="window.location.href='alimentos.html'">Alimentos</button>
                <button class="btnMenu" onclick="window.location.href='dietas.html'">Dietas</button>
                <button class="btnMenuNoti" ><img src="/frontEnd/Imagenes/Login_Perfil/Notificacion.png" id="btnNotification"> </button>

            </div>
            <div class="login">
                <!-- Aquí se mostrará el nombre del usuario una vez que inicie sesión -->
                <div style="float: left; height: 100%; width: 75%;">
                    <button class="btnPerfilView" onclick="window.location.href='login.html'">
                            <span class="nameUser">Nombre de Usuario</span>
                    </button>
                </div>
                <div style="float: left; width: 10%; height: 100%;" onclick="window.location.href='login.html'"><img src="/frontEnd/Imagenes/Login_Perfil/UserPerfil.png" id="fotoUsuario" alt="Foto de Usuario">
                </div>
                <!-- Imagen Foto User -->
                <div id="contenedorLoginFotoUser">
                    <!-- Menú desplegable -->
                    <div id="menuDesplegable" class="menuDesplegable">
                        <button class="opcionMenu" onclick="window.location.href='Login.html'">Ver Perfil</button>
                        <!-- Cerrar sesion-->
            
                        <button class="opcionMenu" id="logoutButton">Cerrar Sesión</button>
                        <script>
                            // Selecciona la imagen y el menú desplegable
                            const fotoUsuario = document.getElementById("fotoUsuario");
                            const menuDesplegable = document.getElementById("menuDesplegable");

                            // Agrega un evento de clic a la imagen
                            fotoUsuario.addEventListener("click", () => {
                                // Alterna la visibilidad del menú
                                if (menuDesplegable.style.display === "block") {
                                    menuDesplegable.style.display = "none";
                                } else {
                                    menuDesplegable.style.display = "block";
                                }
                            });

                            // Cierra el menú si se hace clic fuera de él
                            document.addEventListener("click", (event) => {
                                if (!menuDesplegable.contains(event.target) && event.target !== fotoUsuario) {
                                    menuDesplegable.style.display = "none";
                                }
                            });
                            // Maneja el cierre de sesión
                            const logoutButton = document.getElementById("logoutButton");
                            logoutButton.addEventListener("click", () => {
                                // Limpia el almacenamiento local y redirige al usuario a la página de inicio de sesión
                                localStorage.removeItem("usuario");
                                window.location.href = "login.html"; // Redirige a la página de inicio de sesión
                            });

                        </script>
                    </div>
                </div>
            </div>
        </div>


        <div id="cuerpo">
            <div id="divMenuLateral">
                <button class="botonesPerfilSelec">PERFIL</button>
                <button class="botonesPerfil">MI DIETA</button>
                <button class="botonesPerfil">CALENDARIO</button>
            </div>
            
            <div id="divInfoUser">
                <div id="contenedorInfoSesion">
                    <div id="contenedorInfo">
                        <div id="tituloInfo">
                            Información de usuario:
                        </div>
                        <div style="width: 100%; height: 80%;">
                            <div style= "width: 100%; height: 10%;">
                                <div class="info">
                                        Nombre:
                                </div>
                <div class="spNombre">
                    <span id="spanNombre">Nombre del usuario aquí</span>
                </div>
                            </div>
                            <div style="width: 100%; height: 10%;">
                                <div class="info">
                                        Edad
                                </div>
                <div class="spAge">
                    <span id="spanEdad">Edad del usuario aquí</span>
                </div>
                            </div>
                            <div style="width: 100%; height: 10%;">
                                <div class="info">
                                        Peso:
                                </div>
                <div class="spWeight">
                    <span id="spanPeso">Peso del usuario aquí</span>
                </div>
                            </div>
                            <div style="width: 100%; height: 10%;">
                                <div class="info">
                                        Altura:
                                </div>
                <div class="spHeight">
                    <span id="spanAltura">Altura del usuario aquí</span>
                </div>
                            </div>
                            <div style="width: 100%; height: 10%;">
                                <div class="info">
                                        Correo:
                                </div>
                <div class="spEmail">
                    <span id="spanCorreo">Correo del usuario aquí (censurado)</span>
                </div>
                            </div>
                        </div>
                    </div>
                    <div id="contenedorCerrarSesion">
                        <div id="imagenUser">
                            
                        </div>
                        <button id="cerrarSesion">CERRAR SESIÓN</button>
                        <script></script>
                    </div>
                </div>
            </div>
            <script>
                document.addEventListener("DOMContentLoaded", () => {
                    const usuarioGuardado = localStorage.getItem("usuario");
                    console.log(JSON.parse(localStorage.getItem("usuario")));
                    if (usuarioGuardado) {
                        const usuario = JSON.parse(usuarioGuardado);
                        // Nombre en header
                        const nameUserSpan = document.querySelector(".nameUser");
                        if (nameUserSpan) {
                            nameUserSpan.textContent = usuario.name;
                        }
                        // Nombre en info
                        const nombreSpan = document.getElementById("spanNombre");
                        if (nombreSpan) {
                            nombreSpan.textContent = usuario.name || "-";
                        }
                        // Edad
                        const edadSpan = document.getElementById("spanEdad");
                        if (edadSpan) {
                            edadSpan.textContent = usuario.age || "-";
                        }
                        // Peso
                        const pesoSpan = document.getElementById("spanPeso");
                        if (pesoSpan) {
                            pesoSpan.textContent = usuario.weight ? usuario.weight + " kg" : "-";
                        }
                        // Altura
                        const alturaSpan = document.getElementById("spanAltura");
                        if (alturaSpan) {
                            alturaSpan.textContent = usuario.height ? usuario.height + " cm" : "-";
                        }
                        // Correo
                        const correoSpan = document.getElementById("spanCorreo");
                        if (correoSpan) {
                            correoSpan.textContent = usuario.email || "-";
                        }
                    }
                });
            </script>
            <script>
                //Nombre Span del Usuario Guardado

            
            </script>

            


        </div>
        <div id="pie">
            <div class="divAuxPie">
                
            </div>
            <div class="divImagen">
                <button class="instaBoton"></button>
            </div>
            <div class="divImagen2">
                <button class="faceBoton"></button>
            </div>
            <div class="divImagen2">
                <button class="youTubeBoton"></button>
            </div>
            <div class="divImagen2">
                <button class="whatsBoton"></button>
            </div>
        </div>
    </div>
</body>
</html>