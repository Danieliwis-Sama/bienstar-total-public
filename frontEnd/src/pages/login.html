<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BienStarTotal</title>
    <!-- CSS Global -->

    <link rel="stylesheet" href="Base.css">
    <!-- CSS Específico -->
    <link rel="stylesheet" href="Login.css">
</head>
<body>
    <div id="contenedorPrincipal">

    
        <div id="encabezado">
            <div class="logo">
                <button class="btnLogo" onclick="window.location.href='index.html'"></button>
            </div>
            <div class="menúBotones">
                <button class="btnMenu" onclick="window.location.href='index.html'">Inicio</button>
                <button class="btnMenu" onclick="window.location.href='alimentos.html'">Alimentos</button>
                <button class="btnMenu" onclick="window.location.href='dietas.html'">Dietas</button>
                <button class="btnMenuNoti" ><img src="/frontEnd/Imagenes/Login_Perfil/Notificacion.png" id="btnNotification"> </button>

            </div>
            <div class="login">
                <!-- Aquí se mostrará el nombre del usuario una vez que inicie sesión -->
                <div style="float: left; height: 100%; width: 75%;">
                    <button class="btnPerfilView" onclick="window.location.href='login.html'">
                            <span class="nameUser">Nombre de Usuario</span>
                    </button>
                </div>
                <div style="float: left; width: 10%; height: 100%; position: relative;">
                    <!-- Menú desplegable (ahora arriba de la imagen) -->
                    <div id="menuDesplegable" class="menuDesplegable" style="position: absolute; bottom: 110%; left: 50%; transform: translateX(-50%); display: none; z-index: 1000; background: rgba(255,255,255,0.97); box-shadow: 0 4px 16px rgba(0,0,0,0.18); border-radius: 12px; padding: 20px 16px 20px 16px; min-width: 170px; min-height: 110px; display: flex; flex-direction: column; justify-content: space-between; align-items: stretch;">
                        <button class="opcionMenu" onclick="window.location.href='perfil.html'">Ver Perfil</button>
                        <button class="opcionMenu" id="logoutButton">Cerrar Sesión</button>
                    </div>
                    <img src="/frontEnd/Imagenes/Login_Perfil/UserPerfil.png" id="fotoUsuario" alt="Foto de Usuario">
                </div>
                <script>
                    // Selecciona la imagen y el menú desplegable
                    const fotoUsuario = document.getElementById("fotoUsuario");
                    const menuDesplegable = document.getElementById("menuDesplegable");

                    // Agrega un evento de clic a la imagen
                    fotoUsuario.addEventListener("click", (e) => {
                        e.stopPropagation();
                        if (menuDesplegable.style.display === "block") {
                            menuDesplegable.style.display = "none";
                        } else {
                            menuDesplegable.style.display = "block";
                        }
                    });

                    // Cierra el menú si se hace clic fuera de él
                    document.addEventListener("click", (event) => {
                        if (!menuDesplegable.contains(event.target) && event.target !== fotoUsuario) {
                            menuDesplegable.style.display = "none";
                        }
                    });
                    // Maneja el cierre de sesión
                    const logoutButton = document.getElementById("logoutButton");
                    logoutButton.addEventListener("click", () => {
                        localStorage.removeItem("usuario");
                        window.location.href = "login.html";
                    });
                </script>
            </div>
        </div>
        <div id="cuerpo" class="fondoLogin">
            <div id="contenedorLoginAsist">
                <div id="contenedorLogin">
                    <div id="contenedorLoginFoto">
                        
                    </div>
                    <div class="login-container">
                        <form id="LoginForm">
                            <input type="text" id="email" placeholder="Correo electrónico" required>
                            <input type="password" id="password" placeholder="Contraseña" required>
                            <br></br>
                            <button type="submit" id="botonIngresar">Ingresar</button>
                            <br>
                            <br>
                            <button type="button" onclick="window.location.href='crearCuenta.html'" id="BtnCrearCuenta">Crear Cuenta</button>
                        </form>
                        
                    </div>
                </div>
            </div>
        </div>
        <div id="pie">
            <div class="divAuxPie">
                
            </div>
            <div class="divImagen">
                <button class="instaBoton"></button>
            </div>
            <div class="divImagen2">
                <button class="faceBoton"></button>
            </div>
            <div class="divImagen2">
                <button class="youTubeBoton"></button>
            </div>
            <div class="divImagen2">
                <button class="whatsBoton"></button>
            </div>
        </div>
        <script>
            document.getElementById('BtnCrearCuenta').addEventListener('click', function() {
                window.location.href = 'crearCuenta.html';
            });
        </script>

        <script src="/frontEnd/src/controllers/Login.js">
            console.log("Cargando script de login...");</script>
        <script>
            document.addEventListener("DOMContentLoaded", () => {
                const usuarioGuardado = localStorage.getItem("usuario");

                if (usuarioGuardado) {
                const usuario = JSON.parse(usuarioGuardado);
                const nameUserSpan = document.querySelector(".nameUser");
                if (nameUserSpan) {
                    nameUserSpan.textContent = usuario.name;
                }
                }
            });
        </script>

    </div>
</body>
</html>